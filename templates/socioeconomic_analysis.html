<!DOCTYPE html>
<html>
<head>
    <title>Socioeconomic Analysis</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='shared.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='socioeconomic_analysis.css') }}">
</head>
<body>
    <h1>Socioeconomic Analysis</h1>

    <a href="{{ url_for('home.homepage') }}" class="btn-back-home">Back to Home</a>


    <!-- Form Section -->
    <form method="GET" action="/socioeconomic_analysis" class="form-section">
        <label for="cancer_type">Select Cancer Type:</label>
        <select id="cancer_type" name="cancer_type">
            <option value="-" {% if cancer_type == "-" %}selected{% endif %}>All Cancer Types</option>
            {% for type in cancer_types %}
                <option value="{{ type['id'] }}" {% if type['id']|int == cancer_type|int %}selected{% endif %}>
                    {{ type['name'] }}
                </option>
            {% endfor %}
        </select>

        <!-- Socioeconomic Factor Dropdown -->
        <label for="factor">Select Socioeconomic Factor:</label>
        <select id="factor" name="factor">
            <option value="median_income" {% if factor == "median_income" %}selected{% endif %}>Median Income</option>
            <option value="unemployment_rate" {% if factor == "unemployment_rate" %}selected{% endif %}>Unemployment Rate</option>
            <option value="insurance_rate" {% if factor == "insurance_rate" %}selected{% endif %}>Insurance Rate</option>
        </select>

        <button type="submit" class="btn-submit">Submit</button>
    </form>


    <!-- Flexbox Container for Plot and Analysis -->
    <div class="content">
        <!-- Scatter Plot Section -->
        <div class="plot-section">
            <h2>{{ factor.replace("_", " ").title() }} vs Cancer Mortality Rate</h2>
            {{ scatter_plot | safe }}
        </div>

        <!-- Analysis Text Section -->
        <div class="text-section">
            <h2>About the Analysis</h2>
            <p>
                This analysis examines the relationship between selected socioeconomic factors 
                (Median Income, Unemployment Rate, or Insurance Rate) and cancer mortality rates 
                across states in the U.S. The user can refine the analysis by selecting a specific 
                cancer type or viewing data across all cancers.
            </p>
            <p>
                The mortality rate is calculated as the number of cancer-related deaths per 1,000 
                people in a state, derived from aggregated cancer mortality data and normalized 
                against the total population. This metric provides insight into the prevalence of 
                cancer-related deaths within the population.
            </p>
            <p>
                The scatter plot visualizes this relationship, with the selected socioeconomic factor 
                shown on the x-axis and the cancer mortality rate on the y-axis. Each point represents 
                a state, and tooltips provide the state name and corresponding data values. Patterns 
                or outliers in the plot may reveal disparities or correlations influenced by socioeconomic conditions.
            </p>
            <p>
                This analysis empowers users to explore how socioeconomic disparities impact cancer outcomes, 
                facilitating a deeper understanding of public health challenges and informing policy or intervention strategies.
            </p>
        </div>
    </div>


    <a href="{{ url_for('utilities.download_csv', data_key='socioeconomic_data') }}" class="btn-download-csv">
        Download Socioeconomic Data
    </a>
    
</body>
</html>
