<!DOCTYPE html>
<html>
<head>
    <title>Risk Factors vs Cancer Incidence</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='shared.css') }}">
</head>
<body>
    <h1>Risk Factors vs Cancer Incidence</h1>

    <a href="{{ url_for('home.homepage') }}" class="btn-back-home">Back to Home</a>


    <!-- Form Section -->
    <form method="GET" action="/risk_factors_analysis" class="form-section">
        <label for="cancer_type">Select Cancer Type:</label>
        <select id="cancer_type" name="cancer_type">
            <option value="-" {% if selected_cancer_type == "-" %}selected{% endif %}>All Cancer Types</option>
            {% for site in cancer_types %}
            <option value="{{ site['id'] }}" {% if site['id']|int == selected_cancer_type|int %}selected{% endif %}>
                {{ site['name'] }}
            </option>
            {% endfor %}
        </select>

        <label for="factor">Select Risk Factor:</label>
        <select id="factor" name="factor">
            <option value="cigarette_use_rate" {% if selected_factor == "cigarette_use_rate" %}selected{% endif %}>Smoking Rate</option>
            <option value="inactivity_rate" {% if selected_factor == "inactivity_rate" %}selected{% endif %}>Inactivity Rate</option>
        </select>

        <button type="submit" class="btn-submit">Submit</button>
    </form>


    <!-- Flexbox Container for Plot and Analysis -->
    <div class="content">
        <!-- Scatter Plot Section -->
        <div class="plot-section">
            <h2>{{ selected_factor.replace("_", " ").title() }} vs Cancer Incidence Rate</h2>
            {{ plot_html | safe }}
        </div>

        <!-- Analysis Text Section -->
        <div class="text-section">
            <h2>About the Analysis</h2>
            <p>
                This analysis explores the relationship between selected behavioral risk factors 
                (Cigarette Use Rate or Physical Inactivity Rate) and cancer incidence rates across 
                states in the U.S. Users can further refine the analysis by selecting a specific 
                cancer type or viewing data for all cancers.
            </p>
            <p>
                Cancer incidence is measured as the number of newly diagnosed cases per 1,000 people, 
                calculated using aggregated cancer data and normalized against state populations. 
                This metric provides a standardized measure of the burden of new cancer cases in 
                each state.
            </p>
            <p>
                The scatter plot visualizes the relationship between the selected risk factor 
                (x-axis) and cancer incidence rate (y-axis). Each point represents a state, and 
                tooltips display the state name and corresponding data values. The plot allows 
                users to observe patterns or trends that may indicate a correlation between 
                behavioral risk factors and cancer incidence.
            </p>
            <p>
                This insight highlights the potential impact of public health initiatives aimed 
                at reducing behavioral risk factors to lower cancer incidence rates, offering 
                valuable information for policy-making and health interventions.
            </p>
        </div>
    </div>

    <a href="{{ url_for('utilities.download_csv', data_key='risk_factors_data') }}" class="btn-download-csv">
        Download Risk Factors Data
    </a>
    
</body>
</html>
