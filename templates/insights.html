<!DOCTYPE html>
<html>
<head>
    <title>Insights & Correlations</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='shared.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='insights.css') }}">

</head>
    
<body>
    <h1>Insights & Correlations</h1>
    
    <!-- Flexbox Container for Text and Plot -->
    <div class="content">
        <!-- Text Section -->
        <div class="text-section">
            <h2>About the Query</h2>
            <p>
                This analysis aims to explore the relationship between median income and cancer mortality rates across states. 
                The query computes the mortality rate per 1,000 people for each state using aggregated cancer data 
                and demographic statistics. The data is joined with socioeconomic statistics to include median income.
            </p>
            <p>
                Mortality Rate is calculated as:
                <code>(Total Cancer Deaths / Total Population) * 1000</code>
            </p>
            <h3>Analysis</h3>
            <p>
                The scatter plot visualizes the relationship between median income (x-axis) and cancer mortality rate 
                (y-axis) for each state. Each point represents a state, and the tooltip provides its name.
            </p>
            <p>
                Based on the scatter plot, there does not appear to be a distinct correlation between median income 
                and cancer mortality rates. The points are scattered across the chart without forming any noticeable clusters or trends. 
                This suggests that factors other than median income may have a stronger influence on cancer mortality rates.
            </p>
        </div>

        <!-- Scatter Plot Section -->
        <div class="plot-section">
            <h2>Scatter Plot</h2>
            {{ plot_html | safe }}
        </div>
    </div>

    <!-- Data Table -->
    <h2>Data</h2>
    <table border="1">
        <thead>
            <tr>
                <th>State</th>
                <th>Median Income</th>
                <th>Mortality Rate</th>
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
            <tr>
                <td>{{ row['state'] }}</td>
                <td>{{ row['median_income'] }}</td>
                <td>{{ row['mortality_rate'] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Back Button -->
    <div>
        <a href="/" style="display: inline-block; margin-top: 20px; padding: 10px 20px; background-color: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
            Back to Heatmap
        </a>
    </div>
</body>
</html>
